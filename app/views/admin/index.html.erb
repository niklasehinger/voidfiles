<div class="max-w-6xl mx-auto px-6 pt-16 pb-10">
  <div class="text-center mb-12">
    <h1 class="text-4xl font-extrabold text-voidfiles-navy mb-3"><%= t('admin.title') %></h1>
    <p class="text-gray-600 text-lg">Übersicht über alle registrierten Benutzer und deren Projekte</p>
  </div>

  <div class="grid gap-6 md:grid-cols-3 mb-12">
    <div class="bg-white rounded-xl shadow-lg p-8 border-l-4 border-voidfiles-blue">
      <p class="text-gray-500 text-sm font-semibold uppercase tracking-wide"><%= t('admin.total_users') %></p>
      <p class="text-5xl font-bold text-voidfiles-navy mt-3"><%= @users.count %></p>
    </div>
    <div class="bg-white rounded-xl shadow-lg p-8 border-l-4 border-voidfiles-blue">
      <p class="text-gray-500 text-sm font-semibold uppercase tracking-wide"><%= t('admin.total_projects') %></p>
      <p class="text-5xl font-bold text-voidfiles-navy mt-3"><%= @users.sum { |u| u.prproj_uploads.count } %></p>
    </div>
    <div class="bg-white rounded-xl shadow-lg p-8 border-l-4 border-green-500">
      <p class="text-gray-500 text-sm font-semibold uppercase tracking-wide"><%= t('admin.admin_users') %></p>
      <p class="text-5xl font-bold text-voidfiles-navy mt-3"><%= @users.select(&:admin?).count %></p>
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-lg overflow-hidden">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-voidfiles-navy">
          <tr>
            <th class="px-6 py-5 text-left text-xs font-semibold text-white uppercase tracking-wider">
              <%= t('admin.user') %>
            </th>
            <th class="px-6 py-5 text-left text-xs font-semibold text-white uppercase tracking-wider">
              E-Mail
            </th>
            <th class="px-6 py-5 text-left text-xs font-semibold text-white uppercase tracking-wider">
              <%= t('admin.registered') %>
            </th>
            <th class="px-6 py-5 text-center text-xs font-semibold text-white uppercase tracking-wider">
              <%= t('admin.projects') %>
            </th>
            <th class="px-6 py-5 text-left text-xs font-semibold text-white uppercase tracking-wider">
              <%= t('admin.status') %>
            </th>
            <th class="px-6 py-5 text-center text-xs font-semibold text-white uppercase tracking-wider">
              <%= t('admin.actions') %>
            </th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @users.each do |user| %>
            <tr class="hover:bg-gray-50 transition-colors duration-150">
              <td class="px-6 py-6 whitespace-nowrap text-base font-semibold text-voidfiles-navy">
                <%= user.name || t('admin.unknown_name') %>
              </td>
              <td class="px-6 py-6 whitespace-nowrap text-base text-gray-600">
                <%= user.email %>
              </td>
              <td class="px-6 py-6 whitespace-nowrap text-base text-gray-600">
                <%= user.created_at.strftime("%d. %B %Y") %>
              </td>
              <td class="px-6 py-6 whitespace-nowrap text-center">
                <span class="px-4 py-2 inline-flex text-base leading-5 font-bold rounded-full bg-voidfiles-blue/10 text-voidfiles-blue">
                  <%= user.prproj_uploads.count %>
                </span>
              </td>
              <td class="px-6 py-6 whitespace-nowrap">
                <% if user.admin? %>
                  <span class="px-4 py-2 inline-flex text-sm leading-5 font-bold rounded-full bg-green-100 text-green-800">
                    <%= t('admin.admin') %>
                  </span>
                <% else %>
                  <span class="px-4 py-2 inline-flex text-sm leading-5 font-bold rounded-full bg-gray-100 text-gray-600">
                    <%= t('admin.user') %>
                  </span>
                <% end %>
              </td>
              <td class="px-6 py-6 whitespace-nowrap text-center">
                <% unless user == current_user %>
                  <%= button_to t('admin.delete'), admin_user_destroy_path(user.id, locale: I18n.locale),
                      method: :delete,
                      form: { data: { turbo_confirm: t('admin.confirm_delete', name: (user.name || user.email)) } },
                      class: "text-red-600 hover:text-red-900 font-medium text-sm transition-colors duration-150"
                  %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
